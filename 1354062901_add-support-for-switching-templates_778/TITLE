add support for switching templates
